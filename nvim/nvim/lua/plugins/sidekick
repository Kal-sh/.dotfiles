-- lua/plugins/sidekick.lua: Configuration for sidekick.nvim

local M = {}

function M.setup()
  local sidekick = require("sidekick")

  -- Setup sidekick with your Ollama backend (adjust the model and API URL as needed)
  sidekick.setup({
    ai = {
      -- Ollama API URL for local LLM
      model_url = "http://localhost:11434", -- Replace with your Ollama API endpoint
      model = "qwen2.5-code:1.5b", -- Specify the model you want to use (adjust if necessary)
      headers = {}, -- No API key since it's not required in your setup
    },
    -- Configure sidekick's side window position (optional)
    side_position = "right", -- AI window position: "right", "left", etc.
    -- Optionally, set up keybindings
    keymaps = {
      -- Trigger AI panel with <leader>ai keybinding
      trigger = "<leader>ai", -- Use <leader>ai to open the AI panel
    },
  })

  -- Create the custom :AI command to trigger the AI interaction
  vim.api.nvim_create_user_command("AI", function()
    sidekick.setup({
      ai = {
        model_url = "http://localhost:8080/v1/generate", -- Ollama API endpoint
        model = "qwen2.5-code:1.5b", -- Model name
        headers = {}, -- No API key
      },
      side_position = "right", -- Position of the AI side panel
      keymaps = {
        trigger = "<leader>ai", -- Keybinding to open AI window
      },
    })
  end, { desc = "Open the AI panel" })
end

return M
